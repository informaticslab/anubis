<link rel="import" href="/styles/custom-styles.html">
<dom-module id="anubis-menu-main">
  <template>
  <style include="custom-styles"></style>
  <paper-menu class="menu-color" id="menu1" attr-for-selected="proute" selected="{{pageSelected1}}" >
    <paper-item proute="1">1</paper-item>
    <paper-item proute="2">2</paper-item>
    <paper-item proute="3">3</paper-item>
    <paper-submenu>
      <paper-item class="menu-trigger">4</paper-item>
      <paper-menu class="menu-content sublist" id="menu21"  attr-for-selected="proute" selected="{{pageSelected21}}">
        <paper-item proute="4.1">4.1</paper-item>
        <paper-item proute="4.2">4.2</paper-item>
        <paper-item proute="4.3">4.3</paper-item>
      </paper-menu>
    </paper-submenu>
    <paper-submenu>
      <paper-item class="menu-trigger">5</paper-item>
      <paper-menu class="menu-content sublist" id="menu22"  attr-for-selected="proute" selected="{{pageSelected22}}">
        <paper-item proute="5.1">5.1</paper-item>
        <paper-item proute="5.2">5.2</paper-item>
        <paper-submenu>
          <paper-item class="menu-trigger">5.3</paper-item>
          <paper-menu class="menu-content sublist" id="menu31" attr-for-selected="proute" selected="{{pageSelected31}}">
            <paper-item proute="5.3.1">5.3.1</paper-item>
            <paper-item proute="5.3.2">5.3.2</paper-item>
            <paper-item proute="5.3.3">5.3.3</paper-item>
          </paper-menu>
        </paper-submenu>
      </paper-menu>
    </paper-submenu>
  </paper-menu>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'anubis-menu-main',
    properties: {
      menuSelected: {
          type: String,
          notify: true,
          reflectToAttribute: true
        },
      pageSelected1: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        },
      pageSelected21: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        },
      pageSelected22: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        },
      pageSelected31: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        } 
    },
    _pageSelectedChanged: function(newIndex, oldIndex) {
      if(newIndex!=null)
      {
        // console.log("selected",newIndex,oldIndex);
        // console.log("menu1",this.$.menu1.selected);
        // console.log("menu21",this.$.menu21.selected);
        // console.log("menu22",this.$.menu22.selected);
        // console.log("menu31",this.$.menu31.selected);
        if(newIndex==null)
        {
          this.menuSelected=oldIndex;
        }
        else
        {
          this.menuSelected=newIndex;
          var mainDrawer=document.querySelector('#mainDrawer');
          mainDrawer.closeDrawer();
        }
        this.clearOldSelections();
      }
    },
    clearOldSelections: function(){
      //console.log("clearOldSelections");
      if(this.$.menu1.selected!=this.menuSelected)
      {
        this.$.menu1.selected=null
      }
      if(this.$.menu21.selected!=this.menuSelected)
      {
        this.$.menu21.selected=null
      }
      if(this.$.menu22.selected!=this.menuSelected)
      {
        this.$.menu22.selected=null
      }
      if(this.$.menu31.selected!=this.menuSelected)
      {
        this.$.menu31.selected=null
      }
    }
  });
</script>