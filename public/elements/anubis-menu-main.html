<link rel="import" href="/styles/custom-styles.html">
<dom-module id="anubis-menu-main">
  <template>
  <!--<style include="custom-styles"></style>-->
  <style>
    paper-menu[id^="menu2"] paper-item {
      padding-left: 30px;
    }
    paper-menu[id^="menu3"] paper-item {
      padding-left: 60px;
    }
  </style>
  <paper-menu id="menu11" attr-for-selected="proute" selected="{{pageSelected1}}" >
    <paper-item proute="1">General Guidelines</paper-item>
    <paper-submenu>
      <paper-item class="menu-trigger">
          <span class="flex">Completing Parts 1&2</span>
          <iron-icon icon="expand-more"></iron-icon>
      </paper-item>
      <paper-menu class="menu-content sublist" id="menu21"  attr-for-selected="proute" selected="{{pageSelected21}}">
        <paper-item proute="4.1">Part 1</paper-item>
        <paper-item proute="4.2">Part 2</paper-item>
      </paper-menu>
    </paper-submenu>
    <paper-submenu>
      <paper-item class="menu-trigger">
        <span class="flex">Certification Examples</span>
        <iron-icon icon="expand-more"></iron-icon>
      </paper-item>
      <paper-menu class="menu-content sublist" id="menu22"  attr-for-selected="proute" selected="{{pageSelected22}}">
        <paper-submenu>
        <paper-item class="menu-trigger">
          <span class="flex">Good</span>
        <iron-icon icon="expand-more"></iron-icon>
        </paper-item>
          <paper-menu class="menu-content sublist" id="menu31" attr-for-selected="proute" selected="{{pageSelected31}}">
            <paper-item proute="5.3.1">5.3.1</paper-item>
            <paper-item proute="5.3.2">5.3.2</paper-item>
            <paper-item proute="5.3.3">5.3.3</paper-item>
          </paper-menu>
        </paper-submenu>
        <paper-submenu>
          <paper-item class="menu-trigger">
          <span class="flex">Bad</span>
        <iron-icon icon="expand-more"></iron-icon>
        </paper-item>
          <paper-menu class="menu-content sublist" id="menu31" attr-for-selected="proute" selected="{{pageSelected31}}">
            <paper-item proute="5.3.1">5.3.1</paper-item>
            <paper-item proute="5.3.2">5.3.2</paper-item>
            <paper-item proute="5.3.3">5.3.3</paper-item>
          </paper-menu>
        </paper-submenu>
      </paper-menu>
    </paper-submenu>
    <paper-submenu>
      <paper-item class="menu-trigger">
          <span class="flex">Common Problems</span>
        <iron-icon icon="expand-more"></iron-icon>
        </paper-item>
      <paper-menu class="menu-content sublist" id="menu22"  attr-for-selected="proute" selected="{{pageSelected22}}">
        <paper-item proute="4.1">Uncertainty</paper-item>
        <paper-item proute="4.1">Advanced Age</paper-item>
        <paper-item proute="4.1">Infants</paper-item>
        <paper-submenu>
          <paper-item class="menu-trigger">
          <span class="flex">Disease</span>
        <iron-icon icon="expand-more"></iron-icon>
        </paper-item>
          <paper-menu class="menu-content sublist" id="menu31" attr-for-selected="proute" selected="{{pageSelected31}}">
            <paper-item proute="5.3.1">Abscess</paper-item>
            <paper-item proute="5.3.2">Abdominal Hemorrhage</paper-item>
            <paper-item proute="5.3.3">ARDS</paper-item>
            <paper-item proute="5.3.3">Acute MI</paper-item>
            <paper-item proute="5.3.3">Altered Mental Status</paper-item>
          </paper-menu>
        </paper-submenu>
      </paper-menu>
    </paper-submenu>
    <paper-item proute="6">Tips/Tricks</paper-item>
    <paper-item proute="2">Other Resources/Refernces</paper-item>
    <paper-item proute="3">FAQ</paper-item>
  </paper-menu>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'anubis-menu-main',
    properties: {
      menuSelected: {
          type: String,
          notify: true,
          reflectToAttribute: true
        },
      pageSelected1: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        },
      pageSelected21: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        },
      pageSelected22: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        },
      pageSelected31: {
          type: String,
          observer: '_pageSelectedChanged',
          //notify: true
        } 
    },
    _pageSelectedChanged: function(newIndex, oldIndex) {
      if(newIndex!=null)
      {
        // console.log("selected",newIndex,oldIndex);
        // console.log("menu1",this.$.menu1.selected);
        // console.log("menu21",this.$.menu21.selected);
        // console.log("menu22",this.$.menu22.selected);
        // console.log("menu31",this.$.menu31.selected);
        if(newIndex==null)
        {
          this.menuSelected=oldIndex;
        }
        else
        {
          this.menuSelected=newIndex;
          var mainDrawer=document.querySelector('#mainDrawer');
          mainDrawer.closeDrawer();
        }
        this.clearOldSelections();
      }
    },
    clearOldSelections: function(){
      //console.log("clearOldSelections");
      if(this.$.menu11.selected!=this.menuSelected)
      {
        this.$.menu11.selected=null
      }
      if(this.$.menu21.selected!=this.menuSelected)
      {
        this.$.menu21.selected=null
      }
      if(this.$.menu22.selected!=this.menuSelected)
      {
        this.$.menu22.selected=null
      }
      if(this.$.menu31.selected!=this.menuSelected)
      {
        this.$.menu31.selected=null
      }
    }
  });
</script>